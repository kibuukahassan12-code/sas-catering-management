{% extends "base.html" %}
{% block content %}
<section class="page-header">
    <div>
        <p class="eyebrow">Admin · Payroll</p>
        <h1>{{ action }} Payroll Record</h1>
        <p class="muted">Record a staff payment. This will automatically create a cashbook expense entry.</p>
    </div>
    <a class="btn-secondary" href="{{ url_for('payroll.payroll_list') }}">← Go Back</a>
</section>

<section class="panel">
    <form method="post" action="{% if action == 'Add' %}{{ url_for('payroll.payroll_add') }}{% else %}{{ url_for('payroll.payroll_edit', payroll_id=payroll_record.id) }}{% endif %}" class="form-modern">
        <div class="form-grid-modern">
            <div class="form-group-modern">
                <label for="user_id">Staff Member *</label>
                <select id="user_id" name="user_id" required>
                    <option value="">Select a staff member</option>
                    {% for user in users %}
                    <option value="{{ user.id }}" {% if payroll_record and payroll_record.user_id == user.id %}selected{% endif %}>{{ user.email }} ({{ user.role.value }})</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group-modern">
                <label for="pay_date">Payment Date *</label>
                <input type="date" id="pay_date" name="pay_date" value="{% if payroll_record %}{{ payroll_record.pay_date.isoformat() }}{% else %}{{ default_date }}{% endif %}" required>
            </div>

            <div class="form-group-modern form-group-full">
                <label for="description">Description *</label>
                <input type="text" id="description" name="description" value="{% if payroll_record %}{{ payroll_record.description }}{% else %}Monthly Salary{% endif %}" placeholder="e.g., Monthly Salary, Bonus" required>
            </div>

            <div class="form-group-modern">
                <label for="amount_ugx">Amount (UGX) *</label>
                <input type="number" id="amount_ugx" name="amount_ugx" step="0.01" min="0" value="{% if payroll_record %}{{ payroll_record.amount_ugx }}{% else %}0{% endif %}" required>
            </div>
        </div>

        <div class="form-actions-modern">
            <button type="submit" class="btn-primary">{{ action }}</button>
            <a href="{{ url_for('payroll.payroll_list') }}" class="btn-secondary">Cancel</a>
        </div>
    </form>
</section>
{% endblock %}

