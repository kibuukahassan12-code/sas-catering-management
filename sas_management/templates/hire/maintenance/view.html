{% extends "base.html" %}
{% block content %}
<section class="page-header">
    <div>
        <p class="eyebrow">Maintenance Details</p>
        <h1>Maintenance Record #{{ maintenance.id }}</h1>
        <p class="muted">View full maintenance details and history.</p>
    </div>
    <div class="quick-links">
        <a class="btn-secondary" href="{{ url_for('maintenance.dashboard') }}">Back to Dashboard</a>
    </div>
</section>

<section class="panel">
    <div class="panel-header">
        <h3>Maintenance Information</h3>
        <span class="badge badge-{{ maintenance.status }}">{{ maintenance.status|replace('_', ' ')|title }}</span>
    </div>
    
    <div style="padding: 1.5rem;">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
            <div>
                <strong>Equipment Item ID:</strong><br>
                #{{ maintenance.hire_item_id }}
            </div>
            <div>
                <strong>Maintenance Type:</strong><br>
                <span class="badge badge-{{ maintenance.maintenance_type }}">{{ maintenance.maintenance_type|title }}</span>
            </div>
            <div>
                <strong>Scheduled Date:</strong><br>
                {{ maintenance.scheduled_date.strftime('%Y-%m-%d') if maintenance.scheduled_date else '—' }}
            </div>
            <div>
                <strong>Completed Date:</strong><br>
                {{ maintenance.completed_date.strftime('%Y-%m-%d') if maintenance.completed_date else '—' }}
            </div>
            <div>
                <strong>Technician:</strong><br>
                {{ maintenance.technician_name or '—' }}
            </div>
            <div>
                <strong>Cost:</strong><br>
                {{ CURRENCY }}{{ "%.2f"|format(maintenance.cost) if maintenance.cost else '0.00' }}
            </div>
        </div>
        
        {% if maintenance.notes %}
        <div style="margin-top: 1.5rem;">
            <strong>Notes:</strong><br>
            <div style="padding: 1rem; background: #f8f9fa; border-radius: 4px; margin-top: 0.5rem;">
                {{ maintenance.notes|nl2br }}
            </div>
        </div>
        {% endif %}
        
        <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #dee2e6;">
            <strong>Update Status:</strong>
            <form method="POST" action="{{ url_for('maintenance.update_status', maintenance_id=maintenance.id) }}" style="margin-top: 0.5rem;">
                <select name="status" style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; margin-right: 0.5rem;">
                    <option value="scheduled" {% if maintenance.status == 'scheduled' %}selected{% endif %}>Scheduled</option>
                    <option value="in_progress" {% if maintenance.status == 'in_progress' %}selected{% endif %}>In Progress</option>
                    <option value="completed" {% if maintenance.status == 'completed' %}selected{% endif %}>Completed</option>
                    <option value="cancelled" {% if maintenance.status == 'cancelled' %}selected{% endif %}>Cancelled</option>
                </select>
                <button type="submit" class="btn-primary btn-sm">Update Status</button>
            </form>
        </div>
    </div>
</section>

{% endblock %}

