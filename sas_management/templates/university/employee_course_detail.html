{% extends "base.html" %}

{% block content %}
<section class="page-header">
    <div>
        <p class="eyebrow">Employee University</p>
        <h1>{{ course.title }}</h1>
        <p class="muted">{{ course.description }}</p>
    </div>
    <a class="btn-secondary" href="{{ url_for('university.employee_course_list') }}">← Back to Courses</a>
</section>

<section class="panel">
    <div class="panel-header">
        <h3>Course Materials</h3>
    </div>
    
    {% if materials %}
    <div style="display: flex; flex-direction: column; gap: 1rem;">
        {% for material in materials %}
        <div class="panel" style="padding: 1rem; display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h4 style="margin: 0 0 0.5rem 0;">{{ material.title }}</h4>
                {% if material.material_type %}
                <small class="muted">Type: {{ material.material_type }}</small>
                {% endif %}
            </div>
            <div style="display: flex; gap: 0.5rem;">
                {% if material.file_path %}
                <a href="{{ url_for('university.download_material', material_id=material.id) }}" 
                   class="btn-primary">Download</a>
                {% endif %}
                <a href="{{ url_for('university.view_material', material_id=material.id) }}" 
                   class="btn-secondary">View</a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="muted">No materials available for this course yet.</p>
    {% endif %}
</section>

{% if enrollment %}
<section class="panel">
    <div class="panel-header">
        <h3>Progress</h3>
    </div>
    
    {% if is_completed %}
    <div style="padding: 1.5rem; background: #1a472a; border-radius: 6px; margin-bottom: 1rem;">
        <h4 style="margin: 0 0 0.5rem 0; color: #4ade80;">✓ Course Completed</h4>
        <p class="muted" style="margin: 0; color: #86efac;">
            Completed on {{ enrollment.completed_at.strftime('%B %d, %Y') if enrollment.completed_at else 'N/A' }}
        </p>
    </div>
    <div>
        <a href="{{ url_for('university.view_certificate_employee', course_id=course.id) }}" 
           class="btn-primary">View Certificate</a>
    </div>
    {% else %}
    <p class="muted" style="margin-bottom: 1rem;">
        You are enrolled in this course. Complete all materials and mark the course as complete.
    </p>
    <form method="POST" action="{{ url_for('university.mark_course_complete', course_id=course.id) }}">
        <button type="submit" class="btn-primary">Mark Course Complete</button>
    </form>
    {% endif %}
</section>
{% endif %}
{% endblock %}

